#!/usr/bin/env node
"use strict";
const path = require("path");
const globby = require("globby");
const redaktor = require("../");

const args = process.argv.slice(2);

const renderFolder = path.resolve(args[0], "cms", "page-views");

const params = {
  dataFolder: path.join(args[0], "data"),
  htmlFolder: path.join(args[0], "html"),
  defaultView: require(path.join(renderFolder, "default")),
};

const jsonFiles = path.join(params.dataFolder, "**/*.json");

async function init() {
  params.files = await globby(jsonFiles, { onlyFiles: true });
  await redaktor(params);
}

init();
