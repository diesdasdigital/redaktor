#!/usr/bin/env node
"use strict";
const path = require("path");
const globby = require("globby");
const redaktor = require("../");

const renderFolder = path.resolve(process.cwd(), "cms", "page-views");

const params = {
  contentFolder: "data",
  publicFolder: "html",
  renderFile: require(path.join(renderFolder, "default"))
};

const markdownFiles = [
  path.join(params.contentFolder, "**/*.md"),
  path.join(params.contentFolder, "**/*.markdown")
];

async function init() {
  params.files = await globby(markdownFiles, { onlyFiles: true });
  await redaktor(params);
}

init();
